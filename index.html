<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABDÃœLKADÄ°Râ€™Ä° TOKATLAMA OYUNU</title>

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#1a2a3a,#243b55);
  color:white;
  font-family:Arial, sans-serif;
  overflow:hidden;
}
h1{text-align:center;margin:10px 0}

#startScreen,#messageScreen{
  position:fixed; inset:0;
  background:#000c;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
}

input,button{
  padding:10px;
  font-size:16px;
  border-radius:8px;
  border:none;
  margin:6px;
}

#canBar{
  width:75%;height:16px;background:#444;
  margin:auto;border-radius:10px;overflow:hidden;
}
#can{height:100%;width:100%;background:limegreen}

#stats{text-align:center;margin-top:6px}

#oyun{position:relative;height:70vh}

#foto{
  position:absolute;
  top:50%;left:50%;
  width:300px;
  transform:translate(-50%,-50%);
  border-radius:15px;
}

.shake{animation:shake .18s}
@keyframes shake{
  0%{transform:translate(-50%,-50%)}
  25%{transform:translate(-48%,-50%) rotate(1deg)}
  50%{transform:translate(-52%,-50%) rotate(-1deg)}
  75%{transform:translate(-48%,-50%) rotate(1deg)}
}

.emoji{
  position:absolute;
  font-size:110px;
  opacity:0;
  animation:pop .25s forwards;
  z-index:5;
}
@keyframes pop{
  0%{opacity:0;transform:scale(.5)}
  100%{opacity:1;transform:scale(1)}
}

.firework{
  position:absolute;
  font-size:60px;
  animation:fw 1s forwards;
}
@keyframes fw{
  0%{opacity:1;transform:scale(.5)}
  100%{opacity:0;transform:scale(2)}
}
</style>
</head>

<body>

<div id="startScreen">
  <h2>Ä°smini Yaz</h2>
  <input id="username" placeholder="Ä°sim">
  <button onclick="start()">Oyna</button>
</div>

<div id="messageScreen" style="display:none">
  <h2>Abdulkadir'den mesaj var</h2>
  <button onclick="showStory()">Oku</button>
  <div id="story" style="display:none;max-width:90%;text-align:center">
    <p>
    bir gÃ¼n 32 gelsin diye bekliyorum abdulkadir geldi emirhan abi bi kere
    yalÄ±yÄ±mmÄ± seninkini dedi bende dedimki kardeÅŸim yok ya ÅŸimdi olurmu insanlar var
    dedim neyse ertisi gÃ¼n oldu tuvaletin orda kulaÄŸÄ±ma fÄ±sÄ±ldadÄ± abi dedi ÅŸu yalama
    iÅŸini bi halletsek bende dedim kardeÅŸim olur ama bi fiyat konuÅŸmamÄ±z lazÄ±m
    neyse geÃ§tik tuvalette konuÅŸuyoruz fiyatta anlaÅŸamadÄ±k ben bunu dÃ¶vdÃ¼m.
    </p>
    <button onclick="resetAll()">Eziyete tekrar baÅŸla</button>
  </div>
</div>

<h1>ABDÃœLKADÄ°Râ€™Ä° TOKATLAMA OYUNU</h1>
<div id="canBar"><div id="can"></div></div>

<div id="stats">
  Tokat: <span id="hit">0</span> |
  Rekor: <span id="record">0</span> |
  Kalan Ã–lÃ¼m: <span id="remain">100</span>
</div>

<div id="oyun">
  <img id="foto" src="abdulkadir.png">
</div>

<script>
let can=10000, maxCan=10000;
let hit=0;
let record=localStorage.getItem("rekor") || 0;
let death=parseInt(localStorage.getItem("death")) || 0;
let maxDeath=100;
let username="", damage=20;
let fwOnce=false;
let firstDeathShown=localStorage.getItem("firstDeathShown")==="1";

const audio=new (window.AudioContext||window.webkitAudioContext)();

function slapSound(){
  let b=audio.createBuffer(1,audio.sampleRate*0.1,audio.sampleRate);
  let d=b.getChannelData(0);
  for(let i=0;i<d.length;i++) d[i]=(Math.random()*2-1)*(1-i/d.length);
  let s=audio.createBufferSource();
  s.buffer=b; s.connect(audio.destination); s.start();
}
function punchSound(){
  let o=audio.createOscillator();
  o.frequency.value=90;
  o.connect(audio.destination);
  o.start(); o.stop(audio.currentTime+.12);
}
function fireworkSound(){
  let o=audio.createOscillator();
  o.frequency.value=600;
  o.connect(audio.destination);
  o.start(); o.stop(audio.currentTime+.3);
}

function emoji(e,x,y){
  let m=document.createElement("div");
  m.className="emoji";
  m.innerText=e;
  m.style.left=x+"px";
  m.style.top=y+"px";
  document.body.appendChild(m);
  setTimeout(()=>m.remove(),250);
}

function firework(){
  fireworkSound();
  for(let i=0;i<10;i++){
    let f=document.createElement("div");
    f.className="firework";
    f.innerText="ðŸŽ†";
    f.style.left=Math.random()*innerWidth+"px";
    f.style.top=Math.random()*innerHeight+"px";
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  }
}

function start(){
  username=document.getElementById("username").value||"oyuncu";
  if(username==="admin") damage=2000;
  document.getElementById("startScreen").style.display="none";
}

document.addEventListener("click",e=>{
  if(document.getElementById("startScreen").style.display!=="none") return;

  hit++;
  can-=damage;

  foto.classList.add("shake");
  setTimeout(()=>foto.classList.remove("shake"),180);
  navigator.vibrate?.(50);

  let h=innerHeight;
  if(e.clientY<h*.25||e.clientY>h*.75){
    punchSound(); emoji("ðŸ‘Š",e.clientX,e.clientY);
  }else{
    slapSound(); emoji("ðŸ‘‹",e.clientX,e.clientY);
  }

  if(hit>record){
    record=hit;
    localStorage.setItem("rekor",record);
    if(!fwOnce){ firework(); fwOnce=true; }
  }

  if(can<=0){
    death++;
    localStorage.setItem("death",death);
    can=maxCan;
    fwOnce=false;

    if(death===1 && !firstDeathShown){
      alert("EVET ABDÃœLKADÄ°Râ€™Ä° Ã–LDÃœRMEYÄ° BAÅžARDIN\nAMA ÅžUNU UNUTTUN\nABDÃœLKADÄ°Râ€™Ä°N 100 CANI VAR");
      firstDeathShown=true;
      localStorage.setItem("firstDeathShown","1");
    }

    if(death===100){
      firework();
      document.getElementById("messageScreen").style.display="flex";
    }
  }

  document.getElementById("hit").innerText=hit;
  document.getElementById("record").innerText=record;
  document.getElementById("remain").innerText=maxDeath-death;
  document.getElementById("can").style.width=(can/maxCan*100)+"%";
});

function showStory(){
  document.getElementById("story").style.display="block";
}

function resetAll(){
  localStorage.clear();
  location.reload();
}

document.getElementById("record").innerText=record;
document.getElementById("remain").innerText=maxDeath-death;
</script>

</body>
</html>
